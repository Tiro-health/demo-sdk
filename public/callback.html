<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SDK Callback</title>

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', 'system-ui', '-apple-system', 'sans-serif'],
          }
        }
      }
    }
  </script>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet" />

  <style>
    /* Style the print content */
    print-preview::part(table) {
      border-collapse: collapse;
      width: 100%;
      margin: 1rem 0;
    }

    print-preview::part(th),
    print-preview::part(td) {
      border: 1px solid #333;
      padding: 0.5rem;
      text-align: left;
    }

    print-preview::part(th) {
      background-color: #f5f5f5;
      font-weight: bold;
    }
  </style>
</head>
<body class="dark bg-neutral-900 text-neutral-200 p-8 font-sans leading-relaxed">
  <h1 class="mb-4 text-3xl font-bold">SDK Callback Page</h1>
  <p class="text-green-400 mb-6">‚úì Callback received! Navigation from launch page successful.</p>

  <div class="my-8 pt-4 border-t border-neutral-700">
    <h2 class="mb-4 text-xl text-neutral-400">Print Preview Demo</h2>
    <p class="mb-4">Click the button below to open a print preview of a sample radiology report:</p>
    <button id="preview-btn" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md font-medium cursor-pointer transition-colors mr-4 mb-4">
      üìÑ Open Print Preview
    </button>
  </div>

  <div class="mt-8 pt-8 border-t border-neutral-700">
    <a href="/launch.html" class="text-blue-400 hover:border-b hover:border-blue-400 font-medium transition-colors">
      ‚Üê Back to Launch
    </a>
  </div>

  <!-- Print Preview Component -->
  <print-preview id="printer">
    <paper-sheet>
      <div class="p-8">
        <h1 class="text-2xl font-bold mb-4 text-black">Radiology Report</h1>
        <p class="text-black"><strong>Patient:</strong> John Doe</p>
        <p class="text-black"><strong>MRN:</strong> 12345678</p>
        <p class="text-black"><strong>Study Date:</strong> January 15, 2025</p>
        <p class="text-black"><strong>Modality:</strong> Chest X-Ray (PA and Lateral)</p>
        <hr class="my-6 border-t-2 border-neutral-800">

        <h2 class="text-xl font-semibold mt-4 mb-2 text-black">Clinical Indication</h2>
        <p class="text-black">Patient presents with fever, cough, and shortness of breath. Suspected pneumonia.</p>

        <h2 class="text-xl font-semibold mt-4 mb-2 text-black">Technique</h2>
        <p class="text-black">PA and lateral chest radiographs were obtained.</p>

        <h2 class="text-xl font-semibold mt-4 mb-2 text-black">Findings</h2>
        <p class="text-black">The heart size is normal. There is a focal opacity in the right lower lobe consistent with pneumonia. No pleural effusion or pneumothorax is identified. The visualized osseous structures are unremarkable.</p>

        <h2 class="text-xl font-semibold mt-4 mb-2 text-black">Impression</h2>
        <p class="text-black">Right lower lobe pneumonia.</p>

        <h2 class="text-xl font-semibold mt-4 mb-2 text-black">Recommendations</h2>
        <p class="text-black">Clinical correlation and appropriate antibiotic therapy recommended. Follow-up imaging after treatment to ensure resolution.</p>

        <hr class="my-6 border-t-2 border-neutral-800">
        <p class="text-black"><strong>Radiologist:</strong> Dr. Michael Jones, MD</p>
        <p class="text-black"><strong>Report Date:</strong> January 15, 2025 14:30</p>
      </div>
    </paper-sheet>

    <paper-sheet>
      <div class="p-8">
        <h1 class="text-2xl font-bold mb-4 text-black">FHIR Task Details</h1>

        <table part="table">
          <thead>
            <tr>
              <th part="th">Field</th>
              <th part="th">Value</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td part="td">Task ID</td>
              <td part="td">task-001</td>
            </tr>
            <tr>
              <td part="td">Status</td>
              <td part="td">Requested</td>
            </tr>
            <tr>
              <td part="td">Intent</td>
              <td part="td">Order</td>
            </tr>
            <tr>
              <td part="td">Priority</td>
              <td part="td">Routine</td>
            </tr>
            <tr>
              <td part="td">Code</td>
              <td part="td">Diagnostic imaging study (LOINC: 18748-4)</td>
            </tr>
            <tr>
              <td part="td">Requester</td>
              <td part="td">Dr. Sarah Smith</td>
            </tr>
            <tr>
              <td part="td">Owner</td>
              <td part="td">Dr. Michael Jones, Radiologist</td>
            </tr>
            <tr>
              <td part="td">Authored On</td>
              <td part="td">2025-01-15T10:00:00Z</td>
            </tr>
          </tbody>
        </table>

        <h2 class="text-xl font-semibold mt-4 mb-2 text-black">Reason Code</h2>
        <p class="text-black"><strong>SNOMED CT:</strong> 301228006 - Suspected pneumonia</p>

        <h2 class="text-xl font-semibold mt-4 mb-2 text-black">Notes</h2>
        <p class="text-black">Patient presents with fever, cough, and shortness of breath. Please evaluate for pneumonia or other pulmonary pathology.</p>
      </div>
    </paper-sheet>
  </print-preview>

  <script type="module">
    // Import the print-preview component
    import PrintPreview from 'https://unpkg.com/@browser.style/print-preview@1.0.11/index.js';

    // Query using element tag instead of ID (library changes the ID)
    const printer = document.querySelector('print-preview');
    const previewBtn = document.querySelector('#preview-btn');

    if (previewBtn && printer) {
      previewBtn.addEventListener('click', () => {
        printer.preview();
      });
    }
  </script>
</body>
</html>
