<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SDK Callback</title>
  <style>
    body {
      background: #1a1a1a;
      color: #e5e5e5;
      padding: 2rem;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      line-height: 1.6;
    }
    h1 {
      margin-bottom: 1rem;
      font-size: 2rem;
    }
    p {
      margin-bottom: 1.5rem;
    }
    a {
      color: #60a5fa;
      text-decoration: none;
      font-weight: 500;
      border-bottom: 1px solid transparent;
      transition: border-color 0.2s;
    }
    a:hover {
      border-bottom-color: #60a5fa;
    }
    button {
      background: #2563eb;
      color: white;
      padding: 0.5rem 1rem;
      border: none;
      border-radius: 0.375rem;
      font-weight: 500;
      cursor: pointer;
      transition: background-color 0.2s;
      margin-right: 1rem;
      margin-bottom: 1rem;
    }
    button:hover {
      background: #1d4ed8;
    }
    .success {
      color: #4ade80;
    }
    .actions {
      margin: 2rem 0;
      padding-top: 1rem;
      border-top: 1px solid #404040;
    }
    .nav-links {
      margin-top: 2rem;
      padding-top: 2rem;
      border-top: 1px solid #404040;
    }

    /* Style the print content */
    print-preview::part(table) {
      border-collapse: collapse;
      width: 100%;
      margin: 1rem 0;
    }

    print-preview::part(th),
    print-preview::part(td) {
      border: 1px solid #333;
      padding: 0.5rem;
      text-align: left;
    }

    print-preview::part(th) {
      background-color: #f5f5f5;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h1>SDK Callback Page</h1>
  <p class="success">‚úì Callback received! Navigation from launch page successful.</p>

  <div class="actions">
    <h2 style="margin-bottom: 1rem; font-size: 1.25rem; color: #a3a3a3;">Print Preview Demo</h2>
    <p>Click the button below to open a print preview of a sample radiology report:</p>
    <button id="preview-btn">üìÑ Open Print Preview</button>
  </div>

  <div class="nav-links">
    <a href="/launch.html">‚Üê Back to Launch</a>
  </div>

  <!-- Print Preview Component -->
  <print-preview id="printer">
    <paper-sheet>
      <div style="padding: 2rem;">
        <h1>Radiology Report</h1>
        <p><strong>Patient:</strong> John Doe</p>
        <p><strong>MRN:</strong> 12345678</p>
        <p><strong>Study Date:</strong> January 15, 2025</p>
        <p><strong>Modality:</strong> Chest X-Ray (PA and Lateral)</p>
        <hr style="margin: 1.5rem 0; border: none; border-top: 2px solid #333;">

        <h2>Clinical Indication</h2>
        <p>Patient presents with fever, cough, and shortness of breath. Suspected pneumonia.</p>

        <h2>Technique</h2>
        <p>PA and lateral chest radiographs were obtained.</p>

        <h2>Findings</h2>
        <p>The heart size is normal. There is a focal opacity in the right lower lobe consistent with pneumonia. No pleural effusion or pneumothorax is identified. The visualized osseous structures are unremarkable.</p>

        <h2>Impression</h2>
        <p>Right lower lobe pneumonia.</p>

        <h2>Recommendations</h2>
        <p>Clinical correlation and appropriate antibiotic therapy recommended. Follow-up imaging after treatment to ensure resolution.</p>

        <hr style="margin: 1.5rem 0; border: none; border-top: 2px solid #333;">
        <p><strong>Radiologist:</strong> Dr. Michael Jones, MD</p>
        <p><strong>Report Date:</strong> January 15, 2025 14:30</p>
      </div>
    </paper-sheet>

    <paper-sheet>
      <div style="padding: 2rem;">
        <h1>FHIR Task Details</h1>

        <table part="table">
          <thead>
            <tr>
              <th part="th">Field</th>
              <th part="th">Value</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td part="td">Task ID</td>
              <td part="td">task-001</td>
            </tr>
            <tr>
              <td part="td">Status</td>
              <td part="td">Requested</td>
            </tr>
            <tr>
              <td part="td">Intent</td>
              <td part="td">Order</td>
            </tr>
            <tr>
              <td part="td">Priority</td>
              <td part="td">Routine</td>
            </tr>
            <tr>
              <td part="td">Code</td>
              <td part="td">Diagnostic imaging study (LOINC: 18748-4)</td>
            </tr>
            <tr>
              <td part="td">Requester</td>
              <td part="td">Dr. Sarah Smith</td>
            </tr>
            <tr>
              <td part="td">Owner</td>
              <td part="td">Dr. Michael Jones, Radiologist</td>
            </tr>
            <tr>
              <td part="td">Authored On</td>
              <td part="td">2025-01-15T10:00:00Z</td>
            </tr>
          </tbody>
        </table>

        <h2>Reason Code</h2>
        <p><strong>SNOMED CT:</strong> 301228006 - Suspected pneumonia</p>

        <h2>Notes</h2>
        <p>Patient presents with fever, cough, and shortness of breath. Please evaluate for pneumonia or other pulmonary pathology.</p>
      </div>
    </paper-sheet>
  </print-preview>

  <script type="module">
    // Import the print-preview component
    import PrintPreview from 'https://unpkg.com/@browser.style/print-preview@1.0.11/index.js';

    // Query using element tag instead of ID (library changes the ID)
    const printer = document.querySelector('print-preview');
    const previewBtn = document.querySelector('#preview-btn');

    if (previewBtn && printer) {
      previewBtn.addEventListener('click', () => {
        printer.preview();
      });
    }
  </script>
</body>
</html>
